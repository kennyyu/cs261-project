import os
import sys

exploit_string = "exploitme:"
EXPLOIT = False
if len(sys.argv) < 3:
    print "Usage: python input.py infile outfile"
    sys.exit()

infile = sys.argv[1]
outfile = sys.argv[2]

with open(infile, 'r') as f1:
    with open(outfile, 'w') as f2:
        for line in f1:
            # exploit reached
            if line[:len(exploit_string)] == exploit_string:
                cmd = line[len(exploit_string):-1]
                if EXPLOIT:
                    os.system(cmd)
                else:
                    print "REACHED EXPLOIT: ", cmd
            else:
                f2.write(line.encode('rot13'))
